<dl class="class">
<dt id="api.Blob">
<em class="property">class </em><code class="descclassname">api.</code><code class="descname">Blob</code><a class="headerlink" href="#api.Blob" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>The result of executing a command on your local system.</p>
<p>Under the hood, a <cite>Blob</cite> is just a string, but we wrap it this way so Tilt knows the difference between a string meant to convey content and a string indicating, say, a filepath.</p>
<p>To wrap a string as a blob, call <code class="docutils literal notranslate"><span class="pre">blob(my_str)</span></code></p>
</dd></dl><dl class="class">
<dt id="api.CustomBuild">
<em class="property">class </em><code class="descclassname">api.</code><code class="descname">CustomBuild</code><a class="headerlink" href="#api.CustomBuild" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>An image that was created with <code class="docutils literal notranslate"><span class="pre">custom_build</span></code></p>
<dl class="method">
<dt id="api.CustomBuild.add_fast_build">
<code class="descname">add_fast_build</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#api.CustomBuild.add_fast_build" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Returns a FastBuild that is associated with the image that was built from a <code class="docutils literal notranslate"><span class="pre">custom_build</span></code>. When the container needs to be rebuilt it will be built using the <code class="docutils literal notranslate"><span class="pre">CustomBuild</span></code>. Otherwise update will be done with the <code class="docutils literal notranslate"><span class="pre">FastBuild</span></code> instructions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#api.FastBuild" title="api.FastBuild"><code class="xref py py-class docutils literal notranslate"><span class="pre">FastBuild</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl><dl class="class">
<dt id="api.FastBuild">
<em class="property">class </em><code class="descclassname">api.</code><code class="descname">FastBuild</code><a class="headerlink" href="#api.FastBuild" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>An image that was created with <code class="docutils literal notranslate"><span class="pre">fast_build</span></code></p>
<dl class="method">
<dt id="api.FastBuild.add">
<code class="descname">add</code><span class="sig-paren">(</span><em>src</em>, <em>dest</em><span class="sig-paren">)</span><a class="headerlink" href="#api.FastBuild.add" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Adds the content from <code class="docutils literal notranslate"><span class="pre">src</span></code> into the image at path <code class="docutils literal notranslate"><span class="pre">dest</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>src</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; The path to content to be added to the image (absolute, or relative to the location of the Tiltfile).</li>
<li><strong>dest</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; The path in the image where the content should be added.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#api.FastBuild" title="api.FastBuild"><code class="xref py py-class docutils literal notranslate"><span class="pre">FastBuild</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="api.FastBuild.hot_reload">
<code class="descname">hot_reload</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#api.FastBuild.hot_reload" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Setting this on a <code class="docutils literal notranslate"><span class="pre">FastBuild</span></code> image tells Tilt that this container knows how to automatically reload any changes in the container. As a result there is no need to restart it.</p>
<p>This is useful for containers that run something like nodemon or webpack Hot Module Replacement to update running processes quickly.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="api.FastBuild.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>cmd</em>, <em>trigger=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#api.FastBuild.run" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Runs <code class="docutils literal notranslate"><span class="pre">cmd</span></code> as a build step in the image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cmd</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; A shell command.</li>
<li><strong>trigger</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) &#x2013; If the <code class="docutils literal notranslate"><span class="pre">trigger</span></code> argument is specified, the build step is only run on changes to the given file(s).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl><dl class="class">
<dt id="api.K8sObjectID">
<em class="property">class </em><code class="descclassname">api.</code><code class="descname">K8sObjectID</code><a class="headerlink" href="#api.K8sObjectID" title="Permalink to this definition">&#xB6;</a></dt>
<dd><dl class="attribute">
<dt id="api.K8sObjectID.name">
<code class="descname">name</code><a class="headerlink" href="#api.K8sObjectID.name" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>The object&#x2019;s name (e.g., <cite>&#x201C;my-service&#x201D;</cite>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="api.K8sObjectID.kind">
<code class="descname">kind</code><a class="headerlink" href="#api.K8sObjectID.kind" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>The object&#x2019;s kind (e.g., <cite>&#x201C;deployment&#x201D;</cite>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="api.K8sObjectID.namespace">
<code class="descname">namespace</code><a class="headerlink" href="#api.K8sObjectID.namespace" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>The object&#x2019;s namespace (e.g., <cite>&#x201C;default&#x201D;</cite>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="api.K8sObjectID.group">
<code class="descname">group</code><a class="headerlink" href="#api.K8sObjectID.group" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>The object&#x2019;s group (e.g., <cite>&#x201C;apps&#x201D;</cite>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl><dl class="class">
<dt id="api.LiveUpdateStep">
<em class="property">class </em><code class="descclassname">api.</code><code class="descname">LiveUpdateStep</code><a class="headerlink" href="#api.LiveUpdateStep" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>A step in the process of performing a LiveUpdate on an image&#x2019;s container.</p>
<p>For details, see the <a class="reference external" href="live_update_reference.html">Live Update documentation</a>.</p>
</dd></dl><dl class="class">
<dt id="api.TriggerMode">
<em class="property">class </em><code class="descclassname">api.</code><code class="descname">TriggerMode</code><a class="headerlink" href="#api.TriggerMode" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>A set of constants that describe how Tilt triggers an update for a resource.
Possible values are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">TRIGGER_MODE_AUTO</span></code>: the default. When Tilt detects a change to files or config files associated with this resource, it triggers an update.</li>
<li><code class="docutils literal notranslate"><span class="pre">TRIGGER_MODE_MANUAL</span></code>: user manually triggers update for dirty resources (i.e. resources with pending changes) via a button in the UI. (Note that the initial build always occurs automatically.)</li>
</ul>
<p>The default trigger mode for all manifests may be set with the top-level function <a class="reference internal" href="#api.trigger_mode" title="api.trigger_mode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">trigger_mode()</span></code></a>
(if not set, defaults to <code class="docutils literal notranslate"><span class="pre">TRIGGER_MODE_AUTO</span></code>), and per-resource with <a class="reference internal" href="#api.k8s_resource" title="api.k8s_resource"><code class="xref py py-meth docutils literal notranslate"><span class="pre">k8s_resource()</span></code></a>.</p>
<p>See also: <a class="reference external" href="manual_update_control.html">Manual Update Control documentation</a></p>
</dd></dl><dl class="function">
<dt id="api.blob">
<code class="descclassname">api.</code><code class="descname">blob</code><span class="sig-paren">(</span><em>contents</em><span class="sig-paren">)</span><a class="headerlink" href="#api.blob" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Creates a Blob object that wraps the provided string. Useful for passing strings in to functions that expect a <cite>Blob</cite>, e.g. <code class="docutils literal notranslate"><span class="pre">k8s_yaml</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#api.Blob" title="api.Blob"><code class="xref py py-class docutils literal notranslate"><span class="pre">Blob</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.container_restart">
<code class="descclassname">api.</code><code class="descname">container_restart</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#api.container_restart" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Specify that a container should be restarted when it is live-updated.</p>
<p>May only be included in a <cite>live_update</cite> once, and only as the last step.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#api.LiveUpdateStep" title="api.LiveUpdateStep"><code class="xref py py-class docutils literal notranslate"><span class="pre">LiveUpdateStep</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.custom_build">
<code class="descclassname">api.</code><code class="descname">custom_build</code><span class="sig-paren">(</span><em>ref</em>, <em>command</em>, <em>deps</em>, <em>tag=&apos;&apos;</em>, <em>disable_push=False</em>, <em>live_update=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#api.custom_build" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Provide a custom command that will build an image.</p>
<p>Returns an object which can be used to create a FastBuild.</p>
<p>The command <em>must</em> publish an image with the name &amp; tag <code class="docutils literal notranslate"><span class="pre">$EXPECTED_REF</span></code>.</p>
<p>Tilt will raise an error if the command exits successfully, but the registry does not contain
an image with the ref <code class="docutils literal notranslate"><span class="pre">$EXPECTED_REF</span></code>.</p>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">custom_build</span><span class="p">(</span>
  <span class="s1">&apos;gcr.io/foo&apos;</span><span class="p">,</span>
  <span class="s1">&apos;docker build -t $EXPECTED_REF .&apos;</span><span class="p">,</span>
  <span class="p">[</span><span class="s1">&apos;.&apos;</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ref</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; name for this image (e.g. &#x2018;myproj/backend&#x2019; or &#x2018;myregistry/myproj/backend&#x2019;). If this image will be used in a k8s resource(s), this ref must match the <code class="docutils literal notranslate"><span class="pre">spec.container.image</span></code> param for that resource(s).</li>
<li><strong>command</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; a command that, when run in the shell, builds an image puts it in the registry as <code class="docutils literal notranslate"><span class="pre">ref</span></code>. Must produce an image named <code class="docutils literal notranslate"><span class="pre">$EXPECTED_REF</span></code></li>
<li><strong>deps</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) &#x2013; a list of files or directories to be added as dependencies to this image. Tilt will watch those files and will rebuild the image when they change.</li>
<li><strong>tag</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; Some tools can&#x2019;t change the image tag at runtime. They need a pre-specified tag. Tilt will set <code class="docutils literal notranslate"><span class="pre">$EXPECTED_REF</span> <span class="pre">=</span> <span class="pre">image_name:tag</span></code>,
then re-tag it with its own tag before pushing to your cluster. See <a class="reference external" href="integrating_bazel_with_tilt.html">the bazel guide</a> for an example.</li>
<li><strong>disable_push</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) &#x2013; whether Tilt should push the image in to the registry that the Kubernetes cluster has access to. Set this to true if your command handles pushing as well.</li>
<li><strong>live_update</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<a class="reference internal" href="#api.LiveUpdateStep" title="api.LiveUpdateStep"><code class="xref py py-class docutils literal notranslate"><span class="pre">LiveUpdateStep</span></code></a>]) &#x2013; <p>set of steps for updating a running container (see <a class="reference external" href="live_update_reference.html">Live Update documentation</a>).</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#api.CustomBuild" title="api.CustomBuild"><code class="xref py py-class docutils literal notranslate"><span class="pre">CustomBuild</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.decode_json">
<code class="descclassname">api.</code><code class="descname">decode_json</code><span class="sig-paren">(</span><em>json</em><span class="sig-paren">)</span><a class="headerlink" href="#api.decode_json" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Deserializes a given string from JSON to Starlark. Fails if the string can&#x2019;t be parsed as JSON.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]</td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.default_registry">
<code class="descclassname">api.</code><code class="descname">default_registry</code><span class="sig-paren">(</span><em>registry</em><span class="sig-paren">)</span><a class="headerlink" href="#api.default_registry" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Specifies that any images that Tilt builds should be renamed so that they have the specified Docker registry.</p>
<p>This is useful if, e.g., a repo is configured to push to Google Container Registry, but you want to use Elastic Container Registry instead, without having to edit a bunch of configs. For example, <code class="docutils literal notranslate"><span class="pre">default_registry(&quot;gcr.io/myrepo&quot;)</span></code> would cause <code class="docutils literal notranslate"><span class="pre">docker.io/alpine</span></code> to be rewritten to <code class="docutils literal notranslate"><span class="pre">gcr.io/myrepo/docker.io_alpine</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>registry</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; The registry that all built images should be renamed to use.</td>
</tr>
</tbody>
</table>
<p>Images are renamed following these rules:</p>
<ol class="arabic simple">
<li>Replace <code class="docutils literal notranslate"><span class="pre">/</span></code> and <code class="docutils literal notranslate"><span class="pre">@</span></code> with <code class="docutils literal notranslate"><span class="pre">_</span></code>.</li>
<li>Prepend the value of <code class="docutils literal notranslate"><span class="pre">registry</span></code> and a <code class="docutils literal notranslate"><span class="pre">/</span></code>.</li>
</ol>
<p>e.g., with <code class="docutils literal notranslate"><span class="pre">default_registry(&apos;gcr.io/myorg&apos;)</span></code>, <code class="docutils literal notranslate"><span class="pre">user-service</span></code> becomes <code class="docutils literal notranslate"><span class="pre">gcr.io/myorg/user-service</span></code>.</p>
<p>(Note: this logic is currently crude, on the assumption that development image names are ephemeral and unimportant. <a class="reference external" href="https://github.com/windmilleng/tilt/issues">Please let us know</a> if they don&#x2019;t suit you!)</p>
<p>Cf. our <a class="reference external" href="https://docs.tilt.dev/personal_registry.html">using a personal registry guide</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.docker_build">
<code class="descclassname">api.</code><code class="descname">docker_build</code><span class="sig-paren">(</span><em>ref</em>, <em>context</em>, <em>build_args={}</em>, <em>dockerfile=&apos;Dockerfile&apos;</em>, <em>dockerfile_contents=&apos;&apos;</em>, <em>live_update=[]</em>, <em>ignore=[]</em>, <em>only=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#api.docker_build" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Builds a docker image.</p>
<p>Note that you can&#x2019;t set both the <cite>dockerfile</cite> and <cite>dockerfile_contents</cite> arguments (will throw an error).</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">docker_build(&apos;myregistry/myproj/backend&apos;,</span> <span class="pre">&apos;/path/to/code&apos;)</span></code> is roughly equivalent to the call <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span> <span class="pre">/path/to/code</span> <span class="pre">-t</span> <span class="pre">myregistry/myproj/backend</span></code></p>
<p>Note: If you&#x2019;re using the the <cite>ignore</cite> and <cite>only</cite> parameters to do context filtering and you have tricky cases, reach out to us. The implementation is complex and there might be edge cases.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ref</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; name for this image (e.g. &#x2018;myproj/backend&#x2019; or &#x2018;myregistry/myproj/backend&#x2019;). If this image will be used in a k8s resource(s), this ref must match the <code class="docutils literal notranslate"><span class="pre">spec.container.image</span></code> param for that resource(s).</li>
<li><strong>context</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; path to use as the Docker build context.</li>
<li><strong>build_args</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) &#x2013; build-time variables that are accessed like regular environment variables in the <code class="docutils literal notranslate"><span class="pre">RUN</span></code> instruction of the Dockerfile. See <a class="reference external" href="https://docs.docker.com/engine/reference/commandline/build/#set-build-time-variables---build-arg">the Docker Build Arg documentation</a>.</li>
<li><strong>dockerfile</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; path to the Dockerfile to build.</li>
<li><strong>dockerfile_contents</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference internal" href="#api.Blob" title="api.Blob"><code class="xref py py-class docutils literal notranslate"><span class="pre">Blob</span></code></a>]) &#x2013; raw contents of the Dockerfile to use for this build.</li>
<li><strong>live_update</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<a class="reference internal" href="#api.LiveUpdateStep" title="api.LiveUpdateStep"><code class="xref py py-class docutils literal notranslate"><span class="pre">LiveUpdateStep</span></code></a>]) &#x2013; <p>set of steps for updating a running container (see <a class="reference external" href="live_update_reference.html">Live Update documentation</a>).</p>
</li>
<li><strong>ignore</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) &#x2013; set of file patterns that will be ignored. Ignored files will not trigger builds and will not be included in images. Follows the <a class="reference external" href="https://docs.docker.com/engine/reference/builder/#dockerignore-file">dockerignore syntax</a>.</li>
<li><strong>only</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) &#x2013; <p>set of file patterns that will cause a build to be triggered. All other changes will be ignored. Inverse of ignore parameter. Follows the <a class="reference external" href="https://docs.docker.com/engine/reference/builder/#dockerignore-file">dockerignore syntax</a>. Note that ignores take precedence over this parameter.</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.fail">
<code class="descclassname">api.</code><code class="descname">fail</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="headerlink" href="#api.fail" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Raises an error that cannot be intercepted. Can be used anywhere in a Tiltfile.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.fall_back_on">
<code class="descclassname">api.</code><code class="descname">fall_back_on</code><span class="sig-paren">(</span><em>files</em><span class="sig-paren">)</span><a class="headerlink" href="#api.fall_back_on" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Specify that any changes to the given files will cause Tilt to <em>fall back</em> to a
full image build (rather than performing a live update).</p>
<p><code class="docutils literal notranslate"><span class="pre">fall_back_on</span></code> step(s) may only go at the beginning of your list of steps.</p>
<p>(Files must be a subset of the files that we&#x2019;re already watching for this image;
that is, if any files fall outside of DockerBuild.context or CustomBuild.deps,
an error will be raised.)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>files</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) &#x2013; a string or list of strings of files. If relative, will be evaluated relative to the Tiltfile. Tilt compares these to the local paths of edited files when determining whether to fall back to a full image build.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#api.LiveUpdateStep" title="api.LiveUpdateStep"><code class="xref py py-class docutils literal notranslate"><span class="pre">LiveUpdateStep</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.fast_build">
<code class="descclassname">api.</code><code class="descname">fast_build</code><span class="sig-paren">(</span><em>img_name</em>, <em>dockerfile_path</em>, <em>entrypoint=&apos;&apos;</em><span class="sig-paren">)</span><a class="headerlink" href="#api.fast_build" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Initiates a docker image build that supports <code class="docutils literal notranslate"><span class="pre">add</span></code> s and <code class="docutils literal notranslate"><span class="pre">run</span></code> s, and that uses a cache for subsequent builds.</p>
<p><strong>Note</strong>: this is a deprecated feature. For the fast building of the future, check out our <a class="reference external" href="/live_update_tutorial.html">LiveUpdate tutorial</a> and <a class="reference external" href="/live_update_reference.html">reference documention</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#api.FastBuild" title="api.FastBuild"><code class="xref py py-class docutils literal notranslate"><span class="pre">FastBuild</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.filter_yaml">
<code class="descclassname">api.</code><code class="descname">filter_yaml</code><span class="sig-paren">(</span><em>yaml</em>, <em>labels=None</em>, <em>name=None</em>, <em>namespace=None</em>, <em>kind=None</em>, <em>api_version=None</em><span class="sig-paren">)</span><a class="headerlink" href="#api.filter_yaml" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Call this with a path to a file that contains YAML, or with a <code class="docutils literal notranslate"><span class="pre">Blob</span></code> of YAML.
(E.g. it can be called on the output of <code class="docutils literal notranslate"><span class="pre">kustomize</span></code> or <code class="docutils literal notranslate"><span class="pre">helm</span></code>.)</p>
<p>Captures the YAML entities that meet the filter criteria and returns them as a blob;
returns the non-matching YAML as the second return value.</p>
<p>For example, if you have a file of <em>all</em> your YAML, but only want to pass a few elements to Tilt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># extract all YAMLs matching labels &quot;app=foobar&quot;</span>
<span class="n">foobar_yaml</span><span class="p">,</span> <span class="n">rest</span> <span class="o">=</span> <span class="n">filter_yaml</span><span class="p">(</span><span class="s1">&apos;all.yaml&apos;</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="p">{</span><span class="s1">&apos;app&apos;</span><span class="p">:</span> <span class="s1">&apos;foobar&apos;</span><span class="p">}</span>
<span class="n">k8s_yaml</span><span class="p">(</span><span class="n">foobar_yaml</span><span class="p">)</span>

<span class="c1"># extract YAMLs of kind &quot;deployment&quot; with metadata.name &quot;baz&quot;</span>
<span class="n">baz_yaml</span><span class="p">,</span> <span class="n">rest</span> <span class="o">=</span> <span class="n">filter_yaml</span><span class="p">(</span><span class="n">rest</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&apos;baz&apos;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&apos;deployment&apos;</span><span class="p">)</span>
<span class="n">k8s_yaml</span><span class="p">(</span><span class="n">baz_yaml</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>yaml</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <a class="reference internal" href="#api.Blob" title="api.Blob"><code class="xref py py-class docutils literal notranslate"><span class="pre">Blob</span></code></a>]) &#x2013; Path(s) to YAML, or YAML as a <code class="docutils literal notranslate"><span class="pre">Blob</span></code>.</li>
<li><strong>labels</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>]) &#x2013; return only entities matching these labels. (Matching entities
must satisfy all of the specified label constraints, though they may have additional
labels as well: see the <a class="reference external" href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/">Kubernetes docs</a>
for more info.)</li>
<li><strong>name</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) &#x2013; Case-insensitive regexp specifying the <code class="docutils literal notranslate"><span class="pre">metadata.name</span></code> property of entities to match</li>
<li><strong>namespace</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) &#x2013; Case-insensitive regexp specifying the <code class="docutils literal notranslate"><span class="pre">metadata.namespace</span></code> property of entities to match</li>
<li><strong>kind</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) &#x2013; Case-insensitive regexp specifying the kind of entities to match (e.g. &#x201C;Service&#x201D;, &#x201C;Deployment&#x201D;, etc.).</li>
<li><strong>api_version</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) &#x2013; Case-insensitive regexp specifying the apiVersion for <cite>kind</cite>, (e.g., &#x201C;apps/v1&#x201D;)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p><p>2-element tuple containing</p>
<ul class="simple">
<li><strong>matching</strong> (<a class="reference internal" href="#api.Blob" title="api.Blob"><code class="xref py py-class docutils literal notranslate"><span class="pre">Blob</span></code></a>): blob of YAML entities matching given filters</li>
<li><strong>rest</strong> (<a class="reference internal" href="#api.Blob" title="api.Blob"><code class="xref py py-class docutils literal notranslate"><span class="pre">Blob</span></code></a>): the rest of the YAML entities</li>
</ul>
<p></p>
</td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.helm">
<code class="descclassname">api.</code><code class="descname">helm</code><span class="sig-paren">(</span><em>pathToChartDir</em><span class="sig-paren">)</span><a class="headerlink" href="#api.helm" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Run <a class="reference external" href="https://docs.helm.sh/helm/#helm-template">helm template</a> on a given directory that contains a chart and return the fully rendered YAML as a Blob
Chart directory is watched (See <code class="docutils literal notranslate"><span class="pre">watch_file</span></code>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pathToChartDir</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; Path to the directory locally (absolute, or relative to the location of the Tiltfile).</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#api.Blob" title="api.Blob"><code class="xref py py-class docutils literal notranslate"><span class="pre">Blob</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.k8s_context">
<code class="descclassname">api.</code><code class="descname">k8s_context</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#api.k8s_context" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Returns the name of the Kubernetes context Tilt is connecting to.</p>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">k8s_context</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&apos;prod&apos;</span><span class="p">:</span>
  <span class="n">fail</span><span class="p">(</span><span class="s2">&quot;failing early to avoid overwriting prod&quot;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.k8s_kind">
<code class="descclassname">api.</code><code class="descname">k8s_kind</code><span class="sig-paren">(</span><em>kind</em>, <em>api_version=None</em>, <em>*</em>, <em>image_json_path</em><span class="sig-paren">)</span><a class="headerlink" href="#api.k8s_kind" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Tells Tilt about a k8s kind. Primarily intended for defining where your CRD specifies image names.</p>
<p>(Note the <cite>*</cite> in the signature means <cite>image_json_path</cite> must be passed as a keyword, e.g., <cite>image_json_path=&#x201D;{.spec.image}&#x201D;</cite>)</p>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Fission has a CRD named &quot;Environment&quot;</span>
<span class="n">k8s_yaml</span><span class="p">(</span><span class="s1">&apos;deploy/fission.yaml&apos;</span><span class="p">)</span>
<span class="n">k8s_kind</span><span class="p">(</span><span class="s1">&apos;Environment&apos;</span><span class="p">,</span> <span class="n">image_json_path</span><span class="o">=</span><span class="s1">&apos;{.spec.runtime.image}&apos;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>kind</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; Case-insensitive regexp specifying he value of the <cite>kind</cite> field in the k8s object definition (e.g., <cite>&#x201C;Deployment&#x201D;</cite>)</li>
<li><strong>api_version</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) &#x2013; Case-insensitive regexp specifying the apiVersion for <cite>kind</cite>, (e.g., &#x201C;apps/v1&#x201D;)</li>
<li><strong>image_json_path</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) &#x2013; Either a string or a list of string containing json path(s) within that kind&#x2019;s definition
specifying images deployed with k8s objects of that type.
This uses the k8s json path template syntax, described <a class="reference external" href="https://kubernetes.io/docs/reference/kubectl/jsonpath/">here</a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.k8s_resource">
<code class="descclassname">api.</code><code class="descname">k8s_resource</code><span class="sig-paren">(</span><em>workload</em>, <em>new_name=&apos;&apos;</em>, <em>port_forwards=[]</em>, <em>extra_pod_selectors=[]</em>, <em>trigger_mode=TRIGGER_MODE_AUTO</em><span class="sig-paren">)</span><a class="headerlink" href="#api.k8s_resource" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Configures a kubernetes resources</p>
<p>This description apply to <cite>k8s_resource_assembly_version</cite> 2.
If you are running Tilt version &lt; 0.8.0 and/or do not call <cite>k8s_resource_assembly_version(2)</cite>, see <a class="reference internal" href="#api.k8s_resource_v1_DEPRECATED" title="api.k8s_resource_v1_DEPRECATED"><code class="xref py py-meth docutils literal notranslate"><span class="pre">k8s_resource_v1_DEPRECATED()</span></code></a> instead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>workload</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; which workload&#x2019;s resource to configure. This is a colon-separated
string consisting of one or more of (name, kind, namespace, group), e.g.,
&#x201C;redis&#x201D;, &#x201C;redis:deployment&#x201D;, or &#x201C;redis:deployment:default&#x201D;.
<cite>k8s_resource</cite> searches all loaded k8s workload objects for an object matching
all given fields. If there&#x2019;s exactly one, <cite>k8s_resource</cite> configures options for
that workload. If there&#x2019;s not exactly one, <cite>k8s_resource</cite> raises an error.
(e.g., &#x201C;redis&#x201D; suffices if there&#x2019;s only one object named &#x201C;redis&#x201D;, but if
there&#x2019;s both a deployment and a cronjob named &#x201C;redis&#x201D;, you&#x2019;d need to specify
&#x201C;redis:deployment&#x201D;).</li>
<li><strong>new_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; if non-empty, will be used as the new name for this resource</li>
<li><strong>port_forwards</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) &#x2013; Local ports to connect to the pod. If no
target port is specified, will use the first container port.
Example values: 9000 (connect localhost:9000 to the default container port),
&#x2018;9000:8000&#x2019; (connect localhost:9000 to the container port 8000),
[&#x2018;9000:8000&#x2019;, &#x2018;9001:8001&#x2019;] (connect localhost:9000 and :9001 to the
container ports 8000 and 8001, respectively).</li>
<li><strong>extra_pod_selectors</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]]) &#x2013; In addition to relying on Tilt&#x2019;s heuristics to automatically
find K8S resources associated with this resource, a user may specify extra
labelsets to force entities to be associated with this resource. An entity
will be associated with this resource if it has all of the labels in at
least one of the entries specified (but still also if it meets any of
Tilt&#x2019;s usual mechanisms).</li>
<li><strong>trigger_mode</strong> (<a class="reference internal" href="#api.TriggerMode" title="api.TriggerMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">TriggerMode</span></code></a>) &#x2013; one of <code class="docutils literal notranslate"><span class="pre">TRIGGER_MODE_AUTO</span></code> or <code class="docutils literal notranslate"><span class="pre">TRIGGER_MODE_MANUAL</span></code>. For more info, see the
<a class="reference external" href="manual_update_control.html">Manual Update Control docs</a>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.k8s_resource_assembly_version">
<code class="descclassname">api.</code><code class="descname">k8s_resource_assembly_version</code><span class="sig-paren">(</span><em>version</em><span class="sig-paren">)</span><a class="headerlink" href="#api.k8s_resource_assembly_version" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Specifies which version of k8s resource assembly loading to use.</p>
<p>This function is deprecated and will be removed.
See <a class="reference external" href="/resource_assembly_migration.html">Resource Assembly Migration</a> for information.</p>
<p>Changes the behavior of <a class="reference internal" href="#api.k8s_resource" title="api.k8s_resource"><code class="xref py py-meth docutils literal notranslate"><span class="pre">k8s_resource()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.k8s_resource_v1_DEPRECATED">
<code class="descclassname">api.</code><code class="descname">k8s_resource_v1_DEPRECATED</code><span class="sig-paren">(</span><em>name</em>, <em>yaml=&apos;&apos;</em>, <em>image=&apos;&apos;</em>, <em>port_forwards=[]</em>, <em>extra_pod_selectors=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#api.k8s_resource_v1_DEPRECATED" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>NOTE: This is actually named <a class="reference internal" href="#api.k8s_resource" title="api.k8s_resource"><code class="xref py py-meth docutils literal notranslate"><span class="pre">k8s_resource()</span></code></a>. This documents
the behavior of this method after a call to <a class="reference internal" href="#api.k8s_resource_assembly_version" title="api.k8s_resource_assembly_version"><code class="xref py py-meth docutils literal notranslate"><span class="pre">k8s_resource_assembly_version()</span></code></a> with value <cite>1</cite>.
This behavior is deprecated and will be removed.
See <a class="reference external" href="/resource_assembly_migration.html">Resource Assembly Migration</a> for information.</p>
<p>Creates a kubernetes resource that tilt can deploy using the specified image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; What call this resource in the UI. If <code class="docutils literal notranslate"><span class="pre">image</span></code> is not specified <code class="docutils literal notranslate"><span class="pre">name</span></code> will be used as the image to group by.</li>
<li><strong>yaml</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference internal" href="#api.Blob" title="api.Blob"><code class="xref py py-class docutils literal notranslate"><span class="pre">Blob</span></code></a>]) &#x2013; Optional YAML. If this arg is not passed, we
expect to be able to extract it from an existing resource
(by looking for a k8s container running the specified <code class="docutils literal notranslate"><span class="pre">image</span></code>).</li>
<li><strong>image</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference internal" href="#api.FastBuild" title="api.FastBuild"><code class="xref py py-class docutils literal notranslate"><span class="pre">FastBuild</span></code></a>]) &#x2013; An optional Image. If the image is not passed,
we expect to be able to extract it from an existing resource.</li>
<li><strong>port_forwards</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) &#x2013; Local ports to connect to the pod. If no
target port is specified, will use the first container port.
Example values: 9000 (connect localhost:9000 to the default container port),
&#x2018;9000:8000&#x2019; (connect localhost:9000 to the container port 8000),
[&#x2018;9000:8000&#x2019;, &#x2018;9001:8001&#x2019;] (connect localhost:9000 and :9001 to the
container ports 8000 and 8001, respectively).</li>
<li><strong>extra_pod_selectors</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]]) &#x2013; In addition to relying on Tilt&#x2019;s heuristics to automatically
find K8S resources associated with this resource, a user may specify extra
labelsets to force entities to be associated with this resource. An entity
will be associated with this resource if it has all of the labels in at
least one of the entries specified (but still also if it meets any of
Tilt&#x2019;s usual mechanisms).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.k8s_yaml">
<code class="descclassname">api.</code><code class="descname">k8s_yaml</code><span class="sig-paren">(</span><em>yaml</em><span class="sig-paren">)</span><a class="headerlink" href="#api.k8s_yaml" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Call this with a path to a file that contains YAML, or with a <code class="docutils literal notranslate"><span class="pre">Blob</span></code> of YAML.</p>
<p>We will infer what (if any) of the k8s resources defined in your YAML
correspond to Images defined elsewhere in your <code class="docutils literal notranslate"><span class="pre">Tiltfile</span></code> (matching based on
the DockerImage ref and on pod selectors). Any remaining YAML is YAML that Tilt
applies to your k8s cluster independently.</p>
<p>Any YAML files are watched (See <code class="docutils literal notranslate"><span class="pre">watch_file</span></code>).</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># path to file</span>
<span class="n">k8s_yaml</span><span class="p">(</span><span class="s1">&apos;foo.yaml&apos;</span><span class="p">)</span>

<span class="c1"># list of paths</span>
<span class="n">k8s_yaml</span><span class="p">([</span><span class="s1">&apos;foo.yaml&apos;</span><span class="p">,</span> <span class="s1">&apos;bar.yaml&apos;</span><span class="p">])</span>

<span class="c1"># Blob, i.e. `local` output (in this case, script output)</span>
<span class="n">templated_yaml</span> <span class="o">=</span> <span class="n">local</span><span class="p">(</span><span class="s1">&apos;./template_yaml.sh&apos;</span><span class="p">)</span>
<span class="n">k8s_yaml</span><span class="p">(</span><span class="n">templated_yaml</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>yaml</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <a class="reference internal" href="#api.Blob" title="api.Blob"><code class="xref py py-class docutils literal notranslate"><span class="pre">Blob</span></code></a>]) &#x2013; Path(s) to YAML, or YAML as a <code class="docutils literal notranslate"><span class="pre">Blob</span></code>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.kustomize">
<code class="descclassname">api.</code><code class="descname">kustomize</code><span class="sig-paren">(</span><em>pathToDir</em><span class="sig-paren">)</span><a class="headerlink" href="#api.kustomize" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Run <a class="reference external" href="https://github.com/kubernetes-sigs/kustomize">kustomize</a> on a given directory and return the resulting YAML as a Blob
Directory is watched (See <code class="docutils literal notranslate"><span class="pre">watch_file</span></code>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pathToDir</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; Path to the directory locally (absolute, or relative to the location of the Tiltfile).</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#api.Blob" title="api.Blob"><code class="xref py py-class docutils literal notranslate"><span class="pre">Blob</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.listdir">
<code class="descclassname">api.</code><code class="descname">listdir</code><span class="sig-paren">(</span><em>directory</em>, <em>recursive=False</em><span class="sig-paren">)</span><a class="headerlink" href="#api.listdir" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Returns all the files at the top level of the provided directory. If <code class="docutils literal notranslate"><span class="pre">recursive</span></code> is set to True, returns all files that are inside of the provided directory, recursively.</p>
<p>Directory is watched (See <code class="docutils literal notranslate"><span class="pre">watch_file</span></code>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.local">
<code class="descclassname">api.</code><code class="descname">local</code><span class="sig-paren">(</span><em>cmd</em><span class="sig-paren">)</span><a class="headerlink" href="#api.local" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Runs cmd, waits for it to finish, and returns its stdout as a <code class="docutils literal notranslate"><span class="pre">Blob</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#api.Blob" title="api.Blob"><code class="xref py py-class docutils literal notranslate"><span class="pre">Blob</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.read_file">
<code class="descclassname">api.</code><code class="descname">read_file</code><span class="sig-paren">(</span><em>file_path</em>, <em>default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#api.read_file" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Reads file and returns its contents.</p>
<p>If the <cite>file_path</cite> does not exist and <cite>default</cite> is not <cite>None</cite>, <cite>default</cite> will be returned.
In any other case, an error reading <cite>file_path</cite> will be a Tiltfile load error.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>file_path</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; Path to the file locally (absolute, or relative to the location of the Tiltfile).</li>
<li><strong>default</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) &#x2013; If not <cite>None</cite> and the file at <cite>file_path</cite> does not exist, this value will be returned.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#api.Blob" title="api.Blob"><code class="xref py py-class docutils literal notranslate"><span class="pre">Blob</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.read_json">
<code class="descclassname">api.</code><code class="descname">read_json</code><span class="sig-paren">(</span><em>path</em>, <em>default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#api.read_json" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Reads the file at <cite>path</cite> and deserializes its contents as JSON</p>
<p>If the <cite>path</cite> does not exist and <cite>default</cite> is not <cite>None</cite>, <cite>default</cite> will be returned.
In any other case, an error reading <cite>path</cite> will be a Tiltfile load error.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; Path to the file locally (absolute, or relative to the location of the Tiltfile).</li>
<li><strong>default</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) &#x2013; If not <cite>None</cite> and the file at <cite>path</cite> does not exist, this value will be returned.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.read_yaml">
<code class="descclassname">api.</code><code class="descname">read_yaml</code><span class="sig-paren">(</span><em>path</em>, <em>default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#api.read_yaml" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Reads the file at <cite>path</cite> and deserializes its contents as YAML</p>
<p>If the <cite>path</cite> does not exist and <cite>default</cite> is not <cite>None</cite>, <cite>default</cite> will be returned.
In any other case, an error reading <cite>path</cite> will be a Tiltfile load error.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; Path to the file locally (absolute, or relative to the location of the Tiltfile).</li>
<li><strong>default</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) &#x2013; If not <cite>None</cite> and the file at <cite>path</cite> does not exist, this value will be returned.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.run">
<code class="descclassname">api.</code><code class="descname">run</code><span class="sig-paren">(</span><em>cmd</em>, <em>trigger=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#api.run" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Specify that the given <cite>cmd</cite> should be executed when updating an image&#x2019;s container</p>
<p>May not precede any <cite>sync</cite> steps in a <cite>live_update</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cmd</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; A shell command.</li>
<li><strong>trigger</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) &#x2013; If the <code class="docutils literal notranslate"><span class="pre">trigger</span></code> argument is specified, the build step is only run when there are changes to the given file(s). Paths relative to Tiltfile. (Note that in addition to matching the trigger, file changes must also match at least one of this Live Update&#x2019;s syncs in order to trigger this run. File changes that do not match any syncs will be ignored.)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#api.LiveUpdateStep" title="api.LiveUpdateStep"><code class="xref py py-class docutils literal notranslate"><span class="pre">LiveUpdateStep</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.sync">
<code class="descclassname">api.</code><code class="descname">sync</code><span class="sig-paren">(</span><em>local_path</em>, <em>remote_path</em><span class="sig-paren">)</span><a class="headerlink" href="#api.sync" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Specify that any changes to <cite>localPath</cite> should be synced to <cite>remotePath</cite></p>
<p>May not follow any <cite>run</cite> steps in a <cite>live_update</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>localPath</strong> &#x2013; A path relative to the Tiltfile&#x2019;s directory. Changes to files matching this path will be synced to <cite>remotePath</cite>.
Can be a file (in which case just that file will be synced) or directory (in which case any files recursively under that directory will be synced).</li>
<li><strong>remotePath</strong> &#x2013; container path to which changes will be synced. Must be absolute.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#api.LiveUpdateStep" title="api.LiveUpdateStep"><code class="xref py py-class docutils literal notranslate"><span class="pre">LiveUpdateStep</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.trigger_mode">
<code class="descclassname">api.</code><code class="descname">trigger_mode</code><span class="sig-paren">(</span><em>trigger_mode</em><span class="sig-paren">)</span><a class="headerlink" href="#api.trigger_mode" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Sets the default <a class="reference internal" href="#api.TriggerMode" title="api.TriggerMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">TriggerMode</span></code></a> for resources in this Tiltfile.
(Trigger mode may still be adjusted per-resource with <a class="reference internal" href="#api.k8s_resource" title="api.k8s_resource"><code class="xref py py-meth docutils literal notranslate"><span class="pre">k8s_resource()</span></code></a>.)</p>
<p>If this function is not invoked, the default trigger mode for all resources is <code class="docutils literal notranslate"><span class="pre">TRIGGER</span> <span class="pre">MODE</span> <span class="pre">AUTO</span></code>.</p>
<p>See also: <a class="reference external" href="manual_update_control.html">Manual Update Control documentation</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>trigger_mode</strong> (<a class="reference internal" href="#api.TriggerMode" title="api.TriggerMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">TriggerMode</span></code></a>) &#x2013; may be one of <code class="docutils literal notranslate"><span class="pre">TRIGGER_MODE_AUTO</span></code> or <code class="docutils literal notranslate"><span class="pre">TRIGGER_MODE_MANUAL</span></code></td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.watch_file">
<code class="descclassname">api.</code><code class="descname">watch_file</code><span class="sig-paren">(</span><em>file_path</em><span class="sig-paren">)</span><a class="headerlink" href="#api.watch_file" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>Watches a file. If the file is changed a re-exectution of the Tiltfile is triggered.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file_path</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) &#x2013; Path to the file locally (absolute, or relative to the location of the Tiltfile).</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl><dl class="function">
<dt id="api.workload_to_resource_function">
<code class="descclassname">api.</code><code class="descname">workload_to_resource_function</code><span class="sig-paren">(</span><em>fn</em><span class="sig-paren">)</span><a class="headerlink" href="#api.workload_to_resource_function" title="Permalink to this definition">&#xB6;</a></dt>
<dd><p>(Only supported with <a class="reference internal" href="#api.k8s_resource_assembly_version" title="api.k8s_resource_assembly_version"><code class="xref py py-meth docutils literal notranslate"><span class="pre">k8s_resource_assembly_version()</span></code></a> &gt;= 2(2))
Provide a function that will be used to name <a class="reference external" href="tiltfile_concepts.html#resources">Tilt resources</a>.</p>
<p>Tilt will auto-generate resource names for you. If you do not like the names
it generates, you can use this to customize how Tilt generates names.</p>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># name all tilt resources after the k8s object namespace + name</span>
<span class="k">def</span> <span class="nf">resource_name</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
  <span class="k">return</span> <span class="nb">id</span><span class="o">.</span><span class="n">namespace</span> <span class="o">+</span> <span class="s1">&apos;-&apos;</span> <span class="o">+</span> <span class="nb">id</span><span class="o">.</span><span class="n">name</span>
<span class="n">workload_to_resource_function</span><span class="p">(</span><span class="n">resource_name</span><span class="p">)</span>
</pre></div>
</div>
<p>The names it generates must be unique (i.e., two workloads can&#x2019;t map to the
same resource name).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fn</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<a class="reference internal" href="#api.K8sObjectID" title="api.K8sObjectID"><code class="xref py py-class docutils literal notranslate"><span class="pre">K8sObjectID</span></code></a>], <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) &#x2013; A function that takes a <a class="reference internal" href="#api.K8sObjectID" title="api.K8sObjectID"><code class="xref py py-class docutils literal notranslate"><span class="pre">K8sObjectID</span></code></a> and returns a <cite>str</cite>.
Tilt will call this function once for each workload to determine that workload&#x2019;s resource&#x2019;s name.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>
