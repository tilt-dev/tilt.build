---
title: Using Helm with Tilt
description: "Tilt supports Helm out-of-the-box. Here are two ways you can use Helm charts with Tilt."
layout: docs
---

Tilt supports Helm out-of-the-box.

There are two ways you can use Helm charts with Tilt.

## Basic Helm

If you have a local Helm chart and want to deploy it as-is, add a `helm()` call to your `Tiltfile`:

```python
k8s_yaml(helm('path/to/chart/dir'))
```

The `helm` function runs `helm template` on a chart directory and returns the generated yaml.

When you make edits to the files in the chart directory, Tilt will automatically re-deploy the chart.

## Helm Options

The `helm` function has a few options for common arguments:

```python
yaml = helm(
  'path/to/chart/dir',
  # The release name, equivalent to helm --name
  name='release-name',
  # The namespace to install in, equivalent to helm --namespace
  namespace='my-namespace',
  # The values file to substitute into the chart.
  values=['./path/to/chart/dir/values-dev.yaml'],
  # Values to set from the command-line
  set=['service.port=1234', 'ingress.enabled=true']
  )
k8s_yaml(yaml)
```

## Sub-charts and requirements.txt

If you have chart dependencies, you need to run:

```
helm dep update
```

outside of Tilt to download the dependencies to your repo. Then create a
`.tiltignore` with the contents:

```
**/charts
**/tmpcharts
```

Or, if you want be more cautious:

```
path/to/your/chart/charts
path/to/your/chart/tmpcharts
```

When Helm runs, it touches these chart directories. Adding these lines ensures that Tilt
doesn't reload the Tiltfile every time Helm touches them.

## Advanced Helm

Helm can also do more advanced templating -- like downloading remote charts and injecting run-time variables.

Fortunately, Tilt has a plugin API. You can tell it how to shell out to other build and deploy tools.

The plugin API has two important functions:

- `local()` for running local shell commands

- `watch_file()` for telling Tilt to reload its configuration when a file changes

Let's take a look at some common recipes for using the plugin API with Helm.

### Example Repo

If you prefer to play with a code sample, see

[tilt-dev/tilt-helm-demo](https://github.com/tilt-dev/tilt-helm-demo)

### Re-implementing the `helm()` built-in

To start, let's try implementing the `helm()` built-in ourselves.

```
k8s_yaml(local('helm template path/to/chart/dir'))
watch_file('path/to/chart/dir')
```

The real `helm()` built-in handles some extra optimizations and edge cases, but that's basically all it does!

### Passing a single variable

Now that we know how to shell out to `helm`, we can pass arbitrary flags. Let's try using `--set` to set a variable.

```
k8s_yaml(local('helm template --set key1=val1,key2=val2 path/to/chart/dir'))
watch_file('path/to/chart/dir')
```

### Passing a values file

If you're passing a lot of variables, it's usually better to put those in a values.yaml file.

```
k8s_yaml(local('helm template -f ./values.yaml path/to/chart/dir'))
watch_file('path/to/chart/dir')
watch_file('values.yaml')
```

### Deploying a remote Helm chart

One of the advantages of Helm is that there's a rich library of existing charts.

The `helm_remote` extension can help you load remote charts.

```
load('ext://helm_remote', 'helm_remote')
helm_remote('myChartName')
```

For more options, see the [`helm_remote`
README](https://github.com/tilt-dev/tilt-extensions/tree/master/helm_remote).

### Other Helm tools

There are other helm tools like [helmfile](https://github.com/roboll/helmfile) for working with Helm charts.

We can use the same plugin commands to implement those as well. In this example, we factor out `helmfile` into a helper function.

```
# Helper function to read K8s config YAML from helmfile.
def helmfile(file):
  watch_file(file)
  return local("helmfile -f %s template" % file)

# Tell Tilt to apply to k8s config generated by helmfile.
k8s_yaml(helmfile("k8s/staging/helmfile.yaml"))
```

You can try out this example yourself in [this example repo](https://github.com/tilt-dev/tilt-helmfile-demo).

### Further customization

If you have a Helm use-case that's not covered here, we'd love to hear about it!

You can [file an issue](https://github.com/tilt-dev/tilt/issues) on GitHub.

We're also active on the Kubernetes slack in [the **#tilt** channel](https://kubernetes.slack.com/messages/CESBL84MV/). Get an invite at [slack.k8s.io](http://slack.k8s.io).
